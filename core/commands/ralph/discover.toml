description = "Interactive requirements discovery - create PRD and set up project"

prompt = """
# /ralph:discover - Interactive Requirements Discovery

Start an interactive discovery session to create a PRD and set up the project.

**CRITICAL: ALL CONTENT MUST BE IN ENGLISH.**

## CRITICAL INSTRUCTIONS

**NUMBERED CHOICES FORMAT - MANDATORY:**
You MUST present ALL choices as numbered lists. Users respond with just a number.

Format EVERY question exactly like this:
```
[Question text]

1) Option one
2) Option two
3) Option three

Reply with number:
```

NEVER ask open-ended questions when there are known options.
ALWAYS wait for user to reply with a number before proceeding.

---

## STEP 1: Project type

```
What type of project?

1) Greenfield - New project from scratch
2) Brownfield - Existing project

Reply with number:
```

---

## STEP 2: Project basics (Greenfield) or Source (Brownfield)

### If Greenfield:

Ask description first (free text): "What are we building?"

Then suggest a project name based on the description:
```
Suggested project name: {smart-name-based-on-description}

1) Use this name
2) Enter my own name

Reply with number:
```

If user picks 2, ask: "Project name?"

---

## STEP 3: Feature suggestions (Greenfield only)

**MANDATORY: IMMEDIATELY after getting the description, suggest features.**

DO NOT ask "what features do you want?" - ANALYZE the description and SUGGEST.

Examples:
- **Todo app** → auth, CRUD todos, complete status, due dates, categories, search, filters
- **Blog** → posts, comments, categories, tags, search, admin panel, RSS
- **E-commerce** → products, cart, checkout, payments, orders, user accounts

Format EXACTLY like this:
```
Based on "todo app", here are recommended features:

1) User authentication (login/register)
2) Create/edit/delete todos
3) Mark todos as complete
4) Due dates and reminders
5) Categories/tags
6) Search and filter
7) All of the above

Select features (e.g. "1,2,3" or "7" for all):
```

After selection: "Any additional features? (or 'none'):"
Then: "Any constraints or requirements? (or 'none'):"

---

## STEP 3b: Design preferences (Greenfield only)

```
Do you have design preferences?

1) Yes - I have brand guidelines or a website I like
2) No - Use sensible defaults

Reply with number:
```

If yes, ask:
- "Brand guidelines URL or file path? (or 'none'):"
- "Website you like the design of? (URL or 'none'):"
- "Color preferences? (e.g. 'blue and white', 'dark mode', or 'none'):"

---

## STEP 4: Template selection (Greenfield only)

```
Based on your project, which stack?

1) React + Vite + Tailwind + Supabase (recommended for apps with auth/database)
2) React + Vite + Tailwind (frontend only)
3) Next.js + Tailwind (full-stack with SSR)
4) Custom - Define your own stack

Reply with number:
```

If "custom" was selected, ask about Frontend framework and Backend.

---

## STEP 5: Tasks (Brownfield only)

### If Brownfield:

```
Where is the project?

1) GitHub repo
2) Local path

Reply with number:
```

Then detect stack from package.json and ask about work type (new features, bug fixes, refactoring, mix).

---

## STEP 6: Generate output

When all info is collected:

### 1. Create docs/PRD.md
Create PRD with all gathered information.

### 2. Generate AGENTS.md
Create AGENTS.md at project root with project context and security rules.

### 3. Show summary and NEXT STEP

**OUTPUT THIS EXACT MESSAGE:**
```
PRD created! Review docs/PRD.md

Next: Run /ralph:plan to create implementation specs
```

---

## START NOW

Begin by asking the first numbered question. Remember: ALL choices must be numbered, user replies with just a number.
"""
