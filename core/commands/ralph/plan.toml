description = "Create implementation plan with executable specs from PRD"

prompt = """
# /ralph:plan - Create Implementation Plan

Analyze PRD and create implementation plan with executable specs.

## Prerequisites
- `docs/PRD.md` must exist (run `/ralph:discover` first)

## Output
- `docs/IMPLEMENTATION_PLAN.md` - Overview with epics and tasks
- `specs/*.md` - Executable spec files for each task

## Instructions

Read `docs/PRD.md` and create an implementation plan.

**PHASE 1: ANALYZE PRD**
1. Read `docs/PRD.md` carefully
2. Identify all features and requirements
3. Group into logical epics

**PHASE 2: CREATE IMPLEMENTATION_PLAN.md**

Create `docs/IMPLEMENTATION_PLAN.md` with:
- Epics Overview table (Epic, Name, Status)
- Tasks grouped by priority (Critical, High, Low)
- HARD STOP markers between priority levels
- Progress tracking table
- Learnings and Blocked sections

**PHASE 3: CREATE SPEC FILES (MANDATORY)**

ALWAYS create executable spec files in `specs/`. This is what Ralph runs.

```
specs/
├── 01-project-setup.md   ← MUST include Playwright!
├── 02-database-schema.md
├── 03-auth-context.md
├── 04-login-page.md
└── ...
```

**CRITICAL - 01-project-setup MUST contain:**
- Vite + React + TypeScript setup
- Tailwind with design tokens from PRD
- **Playwright installation** (`npx playwright install`)
- `playwright.config.ts`
- `e2e/smoke.spec.ts`

**Spec file format (MINIMAL - max 20 lines):**
```markdown
# {Task-name}

{1-2 sentences describing what to build}

## Requirements
- {Concrete requirement 1}
- {Concrete requirement 2}

## E2E Test
Write test in `e2e/{feature}.spec.ts` that verifies:
- {what the test should check}

## Done When
- [ ] `npm run build` passes
- [ ] E2E test passes
- [ ] {Specific verification}
```

**IMPORTANT - KEEP SPECS MINIMAL:**
- MAX 20 lines per spec
- No background/context - the AI reads the code
- No implementation details - the AI knows how
- Only WHAT, not HOW
- One spec = one focused task

**WHEN DONE - OUTPUT THIS EXACT MESSAGE:**
```
{X} specs created in specs/

Next: Run /ralph:deploy to send to VM and start building
```
"""
